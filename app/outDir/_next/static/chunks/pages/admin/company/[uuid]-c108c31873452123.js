(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{2370:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/company/[uuid]",function(){return s(8348)}])},8348:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return x}});var i=s(5893),n=s(4924),a=s(6042),l=s(9396),d=s(603),t=s(7294),o=s(1163),u=s(2256),c=s(8541),h=s(7632),m=s(323),v=s(1292),p=s(3263),f=function(){var e=(0,t.useState)(!0),r=e[0],s=e[1],f=(0,t.useState)(!1),x=f[0],j=f[1],g=(0,t.useState)(),N=g[0];g[1];var b=(0,d.Z)(t.useState(null),2),y=b[0],_=b[1],M=(0,t.useState)(),q=M[0],T=M[1],E=(0,o.useRouter)(),C=E.query.uuid;C="string"==typeof C&&C?c.H.returnHashStringValue(C):"";var S=(0,t.useState)({name:{value:"",error:!1,errorMessage:"Name Must Contain More Than 3 Characters",validator:m.m.TEXT},phone_number:{value:"",error:!1,errorMessage:"Invalid Phone Number",validator:m.m.PHONE_NUMBER},address:{value:"",error:!1,errorMessage:"This Field is Required",validator:m.m.TEXT},sector:{value:"",error:!1,errorMessage:"This Field Is Required",required:!0},description:{value:"",error:!1,errorMessage:"Briefly Description is required",required:!0}}),A=S[0],F=S[1],B=function(e){e.preventDefault();var r=e.target,s=r.name,i=r.value,d=A[s],t=null!=d&&!!d.validator&&!d.validator.test(i);d.required&&!i.trim().length&&(t=!0),F((0,l.Z)((0,a.Z)({},A),(0,n.Z)({},s,(0,l.Z)((0,a.Z)({},A[s]),{value:i,error:t}))))};(0,t.useEffect)(function(){j(!0),u.O.httpService("company/uuid/?".concat(C),"GET").then(function(e){if((null==e?void 0:e.status)&&e.status>=200&&e.status<300){T(null==e?void 0:e.data);var r=null==e?void 0:e.data;F({name:{value:r.name,error:!1,errorMessage:"Name Must Contain More Than 3 Characters",validator:m.m.TEXT},phone_number:{value:r.phoneNumber,error:!1,errorMessage:"Invalid Phone Number",validator:m.m.PHONE_NUMBER},address:{value:r.address,error:!1,errorMessage:"This Field is Required",validator:m.m.TEXT},sector:{value:r.sectorOfActivity,error:!1,errorMessage:"This Field Is Required",required:!0},description:{value:r.description,error:!1,errorMessage:"Briefly Description is required",required:!0}})}}).finally(function(){return j(!1)})},[]),(0,t.useEffect)(function(){void 0===Object.entries(A).find(function(e){var r=(0,d.Z)(e,2),s=(r[0],r[1]);return s.error||!s.value.length})?s(!1):s(!0)},[A,N]);var O=function(){(0,h.Z)(),j(!0),_(null);var e={name:A.name.value,description:A.description.value,sectorOfActivity:A.sector.value,address:A.address.value,phoneNumber:A.phone_number.value};setTimeout(function(){u.O.httpService("company/edit/".concat(null==q?void 0:q.idCompany),"PUT",e).then(function(e){var r,s,i,n,a;(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)?_({type:"error",message:null!==(a=null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)&&void 0!==a?a:"An Error occured! Please Try Again later."}):E.push("/admin/")}).finally(function(){return j(!1)})},5e3)};return(0,i.jsxs)("main",{children:[(0,i.jsx)(v.a,{is_loading:x}),(0,i.jsx)("div",{hidden:null==y,children:(0,i.jsx)(p.w,{message:null==y?void 0:y.message,type:null==y?void 0:y.type})}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"difContainer",children:(0,i.jsxs)("div",{className:"difBloc",children:[(0,i.jsx)("div",{className:"difHeadings",children:(0,i.jsx)("h2",{children:"Register your entreprise"})}),(0,i.jsx)("form",{action:"",id:"difRegister",method:"post",children:(0,i.jsxs)("div",{className:"difFlex",children:[(0,i.jsxs)("fieldset",{children:[(0,i.jsxs)("label",{htmlFor:"difName",children:[(0,i.jsx)("span",{children:"Nom de l'entreprise:"}),(0,i.jsx)("input",{type:"text",id:"difName",value:A.name.value,onChange:B,className:"difName",name:"name",placeholder:"Enter your entreprise name",required:!0}),(0,i.jsx)("small",{className:"error",children:A.name.error&&A.name.errorMessage})]}),(0,i.jsxs)("label",{htmlFor:"difAddress",children:[(0,i.jsx)("span",{children:"Address"}),(0,i.jsx)("input",{type:"text",id:"difAddress",className:"difAddress",value:A.address.value,onChange:B,name:"address",placeholder:"Enter your entreprise adress",required:!0}),(0,i.jsx)("small",{className:"error",children:A.address.error&&A.address.errorMessage})]}),(0,i.jsxs)("label",{htmlFor:"difSecteur",children:[(0,i.jsx)("span",{children:"Secteur d'activit\xe9:"}),(0,i.jsxs)("select",{id:"difSecteur",className:"difSecteur",value:A.sector.value,onChange:B,name:"sector",children:[(0,i.jsx)("option",{value:"",children:"Select a field"}),(0,i.jsx)("option",{value:"Agriculture",children:"Agriculture"}),(0,i.jsx)("option",{value:"Informatique",children:"Informatique"}),(0,i.jsx)("option",{value:"Banque/Finance",children:"Banque/Finance"})]}),(0,i.jsx)("small",{className:"error",children:A.sector.error&&A.sector.errorMessage})]})]}),(0,i.jsxs)("fieldset",{children:[(0,i.jsxs)("label",{htmlFor:"difAddress",children:[(0,i.jsx)("span",{children:"Phone"}),(0,i.jsx)("input",{type:"text",id:"difAddress",className:"difAddress",value:A.phone_number.value,onChange:B,name:"phone_number",placeholder:"phone",required:!0}),(0,i.jsx)("small",{className:"error",children:A.phone_number.error&&A.phone_number.errorMessage})]}),(0,i.jsxs)("label",{htmlFor:"difDescription",children:[(0,i.jsx)("span",{children:"Description:"}),(0,i.jsx)("textarea",{id:"difDescription",value:A.description.value,onChange:B,className:"difDescription",name:"description",required:!0}),(0,i.jsx)("small",{className:"error",children:A.description.error&&A.description.errorMessage})]})]})]})}),(0,i.jsx)("button",{disabled:r,onClick:O,className:"difBtn difBtnGreen",style:r?{cursor:"not-allowed",background:"#bbb"}:{cursor:"pointer"},children:"Continue"})]})})]})},x=function(){return(0,i.jsx)(f,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2370)}),_N_E=e.O()}]);